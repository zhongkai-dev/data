CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    telegram_id TEXT UNIQUE,
    username TEXT,
    first_name TEXT,
    last_name TEXT,
    is_blocked INTEGER DEFAULT 0,
    check_limit INTEGER DEFAULT 1000,
    daily_checks INTEGER DEFAULT 0,
    last_check_date DATE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS settings (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    key TEXT UNIQUE,
    value TEXT,
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS lookup_history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id TEXT,
    phone_number TEXT,
    country TEXT,
    region TEXT, 
    carrier TEXT,
    carrier_type TEXT,
    is_valid INTEGER,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(telegram_id)
);

CREATE TABLE IF NOT EXISTS api_keys (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    value TEXT UNIQUE,
    is_active INTEGER DEFAULT 0,
    usage_count INTEGER DEFAULT 0,
    last_used DATETIME,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Insert default settings
INSERT OR IGNORE INTO settings (key, value) VALUES
    ('veriphone_api_key', '4C9FBDA3C44247929DBC907666F638BC'),
    ('bot_status', 'active'),
    ('current_api_key_index', '0');

-- Insert the list of API keys
INSERT OR IGNORE INTO api_keys (value) VALUES
    ('C2C65540E34D42D9A1AE05D752B0BDB9'),
    ('F4F060B77E7C44EE903266ABD0BE501B'),
    ('E15BA6D4990E4F878AAD1BC6FB8C906A'),
    ('A1A6C980E090482BBB7DE90E6FDEB2E1'),
    ('A00AAF9E6A534B67A5C75BCDBE130381'),
    ('CF3902B91FFB4B34B1FAAC0ED7C57136'),
    ('F38E27BECE174CC5BDBE7AC024BBF6B5'),
    ('0BFC196529844002B7163110AFFC99A0'),
    ('4FC8E49789B646FEA5F74FB9EA768889'),
    ('234F2321259845CD9BA3C4009E394D17'),
    ('EDAB0B75C3FC40219B574DEC620E3BE3'),
    ('22A0D2E83DA0404AAC41D8036873E45B'),
    ('23C69B0BFE6C4AD7805400C0E12C21DE'),
    ('33B34020793C42899827CD964761D98F'),
    ('29F17961766E44A2B570F851CA1AD380'),
    ('8B035196E4B04C00B8D593F4F1DFDC56'),
    ('2A0CAD6044F24F9CAECDE4E2D5303047'),
    ('2EEBA2816B754C0CBA4D4179FB05EB5C'),
    ('960CD75A28B04097A54628F8A37CA018'),
    ('39BACE824D0146C88F72190965649F7B'),
    ('07EB798C11714725947E55CE04769821'),
    ('65558CB215924BAC8FD53CE1623D158D'),
    ('169AEA1C04FC4EB7964F9639B9B4470C'),
    ('FDF92242E6084820ACE653514E6D706D'),
    ('7B9056361E3F4A79AB4F41F5A9228CAF'),
    ('D690107B1E184267B5E902CE16830B88'),
    ('C487397E4BF7436280484A209606FF67'),
    ('779A1EEDE0B04B5A91973E2327C10C59'),
    ('0D7FDF01F1B54160889704DF05578FBF'),
    ('1CEF72277E354986AE431DB2338CEAD7'),
    ('73DB7DF7A6CC4ADB96D432412AED9B1F'),
    ('21AA62B1B119495A987818B16D9D705A'),
    ('F4550BE74907492684ED8D6E316F9577'),
    ('C2AB93B5599E4753A655A6C5C917FCE9'),
    ('1D918CE0987643818FC5DCF27686FE61'),
    ('4C9FBDA3C44247929DBC907666F638BC');

-- Set the first API key as active
UPDATE api_keys SET is_active = 1 WHERE id = 1; 